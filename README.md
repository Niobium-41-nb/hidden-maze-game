# 隐藏迷宫游戏 (Hidden Maze)

基于深度优先搜索算法生成的迷宫探索游戏，具有两种不同的视野模式。

## 游戏概述

### 核心理念
- **游戏名称**: 隐藏迷宫 (Hidden Maze)
- **核心机制**: 玩家在未知的迷宫中探索，只能看到当前位置和终点位置
- **核心特色**: 通过探索逐步揭示迷宫结构，有两种不同的视野模式

### 游戏目标
- 从起点(绿色)到达终点(红色)
- 在探索过程中还原迷宫的真实结构
- 选择适合自己游戏风格的视野模式

## 游戏特性

### 1. 迷宫生成
- **生成算法**: 随机深度优先搜索(DFS)算法
- **迷宫大小**: 可配置 (10×10, 15×15, 20×20, 25×25)
- **复杂度**: 可调节的路径分支率
- **保证条件**: 至少存在一条从起点到终点的路径

### 2. 视野系统
#### 模式一: 永久显示模式
- 已探索的迷宫墙永久显示在屏幕上
- 玩家可以查看完整的探索历史
- 适合策略型玩家

#### 模式二: 即时视野模式
- 只显示当前可见的迷宫墙
- 离开某个区域后，该区域的墙不再显示
- 增加游戏难度和沉浸感

### 3. 玩家视野范围
- **基础视野**: 以玩家为中心的3×3区域
- **视野渲染**: 使用不同颜色/透明度区分已探索和未探索区域

### 4. 移动机制
- **控制方式**: 鼠标点击移动 + 键盘控制
- **移动规则**: 只能移动到相邻的空单元格
- **移动限制**: 不能穿过墙壁

## 游戏控制

### 键盘控制
- **方向键** 或 **WASD**: 移动玩家
- **空格键**: 暂停/继续游戏
- **ESC键**: 暂停/继续游戏
- **Ctrl+S**: 保存游戏
- **Ctrl+L**: 加载游戏
- **Ctrl+R**: 重新开始游戏
- **Ctrl+H**: 显示/隐藏解决方案

### 鼠标控制
- 点击迷宫中的相邻单元格移动玩家

### 游戏界面控制
- **开始游戏**: 点击开始按钮
- **重新开始**: 点击重新开始按钮
- **显示提示**: 点击提示按钮
- **显示解决方案**: 点击显示路径按钮
- **切换视野模式**: 点击永久/即时按钮
- **调整迷宫大小**: 使用下拉菜单选择

## 安装与运行

### 在线运行
直接打开 `index.html` 文件在浏览器中运行。

### 本地运行
1. 下载所有文件到本地目录
2. 使用任何现代浏览器打开 `index.html`
3. 无需安装任何额外依赖

### 文件结构
```
隐藏迷宫/
├── index.html          # 主页面
├── style.css           # 样式文件
├── maze.js             # 迷宫生成算法
├── game.js             # 游戏核心逻辑
├── view.js             # 视野系统
├── ui.js               # 用户界面控制
├── main.js             # 主游戏控制
├── README.md           # 说明文档
└── plans/              # 设计文档
    └── 游戏设计文档.md  # 原始设计文档
```

## 游戏规则

### 基本规则
1. 玩家从起点(绿色)开始
2. 目标是通过迷宫到达终点(红色)
3. 只能移动到相邻的单元格
4. 不能穿过墙壁
5. 探索迷宫以发现路径

### 视野规则
- **永久模式**: 所有已探索的区域永久可见
- **即时模式**: 只显示当前视野范围内的区域
- **视野范围**: 以玩家为中心的3×3区域

### 胜利条件
- 玩家到达终点单元格
- 游戏统计步数、时间和探索率

### 游戏统计
- **步数**: 玩家移动的总步数
- **探索率**: 已探索单元格占总单元格的百分比
- **时间**: 从开始到胜利所用的时间

## 技术实现

### 技术栈
- **前端**: HTML5 + CSS3 + JavaScript (ES6+)
- **图形渲染**: HTML5 Canvas 2D
- **游戏引擎**: 原生JavaScript实现，无外部依赖

### 核心算法
1. **迷宫生成**: 深度优先搜索(DFS)算法
2. **路径查找**: 广度优先搜索(BFS)算法
3. **视野计算**: Bresenham直线算法
4. **碰撞检测**: 墙壁阻挡检测

### 模块设计
- **Maze类**: 迷宫数据结构和生成算法
- **Game类**: 游戏状态管理和规则逻辑
- **ViewSystem类**: 视野系统管理
- **UIController类**: 用户界面和渲染控制
- **Main控制器**: 游戏初始化和全局控制

## 扩展功能

### 已实现功能
- [x] 随机迷宫生成
- [x] 两种视野模式
- [x] 键盘和鼠标控制
- [x] 游戏状态保存/加载
- [x] 解决方案显示
- [x] 游戏统计
- [x] 响应式设计

### 计划功能
- [ ] 多关卡系统
- [ ] 道具系统（扩大视野、传送门等）
- [ ] 音效和背景音乐
- [ ] 成就系统
- [ ] 在线排行榜
- [ ] 移动端适配优化

## 开发者信息

### 调试工具
在本地开发环境下，游戏实例会暴露到全局：
- `window.game`: 游戏实例
- `window.uiController`: UI控制器实例
- `window.debug`: 调试命令集合

### 调试命令
```javascript
// 显示所有单元格
debug.showAll()

// 立即胜利
debug.win()

// 显示游戏统计
debug.stats()
```

### 浏览器兼容性
- Chrome 60+
- Firefox 55+
- Safari 11+
- Edge 79+

## 许可证

本项目仅供学习和演示使用。

## 贡献

欢迎提交问题和改进建议！

## 游戏截图

（游戏运行后可以添加截图）

## 更新日志

### v1.0.0 (2025-12-19)
- 初始版本发布
- 实现基本迷宫生成和探索功能
- 添加两种视野模式
- 完成用户界面和控制功能
- 添加游戏保存/加载功能

---

**祝您游戏愉快！** 🎮